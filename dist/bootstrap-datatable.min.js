!function(t){function a(){var t=this.options,a=this.$element;a.empty(),t.tableCallback&&"function"==typeof t.tableCallback&&t.tableCallback.call(this),this.loading(!1),this.$default&&a.append(this.$default)}function e(a){var e=a.options;if("bool"==t(this).data("filterType")){t(this).is(":checked")?e.filter[t(this).data("filter")]=t(this).val():delete e.filter[t(this).data("filter")];var o="";for(var r in e.filter)""!=o&&(o+="&"),o+=r+"="+encodeURIComponent(e.filter[r]);history.pushState(e.filter,"","?"+o),a.render()}else{e.filter[t(this).data("filter")]=t(this).val();var o="";for(var r in e.filter)""!=o&&(o+="&"),o+=r+"="+encodeURIComponent(e.filter[r]);history.pushState(e.filter,"","?"+o),a.render()}}var o=function(a,e){this.$element=t(a),this.options=e,this.enabled=!0,this.columns=[],this.rows=[],this.buttons=[],this.localStorageId="datatable_"+(e.id||e.url.replace(/\W/gi,"_"));for(var o in this.options.columns)void 0===typeof this.options.columns[o].sortable&&(this.options.columns[o].sortable=!0);this.$element.addClass("clearfix"),this.options.tablePreRender&&"function"==typeof this.options.tablePreRender&&this.options.tablePreRender.call(this),this.options.autoLoad===!0&&this.render()};o.prototype={constructor:o,render:function(){var e=this.options,o=this.$element;this.loading(!0),this.columns=[],this.rows=[],this.buttons=[],this.$wrapper=void 0,this.$table=void 0,this.$header=void 0,this.$body=void 0,this.$footer=void 0,this.$pagination=void 0,this.$top_details=t("<div></div>").addClass("dt-top-details"),this.$bottom_details=t("<div></div>").addClass("dt-bottom-details");var r,s=0;if(localStorage){var l=new Date,i=new Date(localStorage[this.localStorageId+".time"]);if(l.getTime()-i.getTime()>6e5){s=localStorage[this.localStorageId+".page"];try{r=JSON.parse(localStorage[this.localStorageId+".sort"])}catch(t){}}}s&&(e.currentPage=s),r&&(e.sort=r);var n=this;""!==e.url&&t.ajax({url:e.url,type:"POST",dataType:"json",data:t.extend({},e.post,{currentPage:e.currentPage,perPage:e.perPage,sort:e.sort,filtering:e.filter}),success:function(t){n.resultset=t,o.empty(),"ERROR"==t.Result?(console.log(t),o.append("An error has occurred."),n.loading(!1)):(e.sort=t.sort,e.filter=t.filter,e.totalRows=t.totalRows,t.currentPage&&(e.currentPage=parseInt(t.currentPage)),o.append(n.table()),o.prepend(n.$top_details),o.append(n.$bottom_details),e.showHeader&&n.header(),e.showFooter&&n.footer(),n.body(),e.showTopPagination&&n.pagination()&&n.$top_details.append(n.pagination().clone(!0)),e.showPagination&&n.pagination()&&n.$bottom_details.append(n.pagination().clone(!0)),n.details(),e.tableCallback&&"function"==typeof e.tableCallback&&e.tableCallback.call(n),n.fadeIn(),n.loading(!1))},error:function(t){e.debug&&console.log(t),a.call(n),n.loading(!1)}})},loading:function(a){var e=this.$element;this.$loading||(this.$loading=t("<div></div>").css({position:"absolute",left:Math.floor(e.width()/4),width:Math.floor(e.width()/2)+"px"}).append(t("<div></div>").addClass("progress").append(t('<div role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>').addClass("progress-bar progress-bar-primary progress-bar-striped active"))).appendTo(e.parent())),a?e.css({opacity:.2}):(e.css({opacity:1}),this.$loading.remove(),this.$loading=void 0)},details:function(){var a=this.options,e=(this.resultset,0),o=0;e=a.currentPage*a.perPage-a.perPage+1,e<1&&(e=1),o=a.currentPage*a.perPage,o>a.totalRows&&(o=a.totalRows),a.totalRows>0&&t('<div class="pull-left"><p>Showing '+e+" to "+o+" of "+a.totalRows+" "+a.rowsName+"</p></div>").prependTo(this.$bottom_details)},fadeIn:function(){var t=this.options;this.$wrapper.animate({opacity:1},t.tableFade)},table:function(){var a=(this.$element,this.options);return this.$table_wrapper||(this.$wrapper=t("<div></div>").addClass("dt-table-wrapper table-responsive")),this.$table||(this.$table=t("<table></table>").addClass(a.class)),this.$wrapper.append(this.$table),this.$wrapper},header:function(){var a=this.options;this.resultset;if(!this.$header){this.$header=t("<thead></thead>");var e=t("<tr></tr>");for(var o in a.columns){var r=this.column(o),s=r.data("column_properties");s.sortable&&!s.custom&&r.click(this,this.sort).addClass("sortable");for(var l=0;l<a.sort.length;l++)a.sort[l][0]==s.field&&("asc"==a.sort[l][1]?(r.addClass("sorting-asc"),s.sortOrder="asc"):"desc"==a.sort[l][1]&&(r.addClass("sorting-desc"),s.sortOrder="desc"));e.append(r),this.$header.append(e),this.columns.push(r)}a.headerCallback&&"function"==typeof a.headerCallback&&a.headerCallback.call(this),this.$table.append(this.$header)}return this.$header},footer:function(){var a=this.options;this.resultset;if(!this.$footer){this.$footer=t("<tfoot></tfoot>");for(column in a.columns){var e=t("<td></td>");e.data("cell_properties",a.columns[column]).addClass(a.columns[column].classname),this.$footer.append(e)}a.footerCallback&&"function"==typeof a.footerCallback&&a.footerCallback.call(this,this.resultset.footer),this.$table.append(this.$footer)}return this.$footer},body:function(){var a=this.resultset,e=this.options;if(!this.$body){this.$body=t("<tbody></tbody>");for(var o=0;o<a.data.length;o++){var r=this.row(a.data[o]);this.$body.append(r),this.rows.push(r)}e.showFilterRow&&this.$body.prepend(this.filter()),this.$table.append(this.$body)}return this.$body},filter:function(){var a=t("<tr></tr>"),o=this.options,r=this;a.addClass("dt-filter-row");for(var s in o.columns){var l=t("<td></td>").addClass(o.columns[s].classname);if(o.columns[s].hidden&&l.hide(),o.columns[s].filter&&o.columns[s].field){var i=t('<input class="form-control input-sm input-xs input-filter" />').attr("name","filter_"+o.columns[s].field).data("filter",o.columns[s].field).val(o.filter[o.columns[s].field]||"").change(function(t){o.currentPage=1,localStorage&&(localStorage[r.localStorageId+".page"]=o.currentPage),e.call(this,r)});"bool"==o.columns[s].fieldType?i.attr("type","checkbox").data("filterType","bool").val("True").attr("checked","True"==o.filter[o.columns[s].field]):i.attr("type","text"),l.append(i)}a.append(l)}return a},row:function(a){var e=t("<tr></tr>"),o=this.options;e.data("row_data",a);for(var r in o.columns){var s=this.cell(a,r);e.append(s)}return o.rowCallback&&"function"==typeof o.rowCallback&&(e=o.rowCallback(e,a)),e},cell:function(a,e){var o=a[this.options.columns[e].field],r=t("<td></td>"),s=this.options;return s.columns[e].callback&&"function"==typeof s.columns[e].callback&&(o=s.columns[e].callback.call(r,a,s.columns[e])),r.data("cell_properties",s.columns[e]).addClass(s.columns[e].classname).append(o),s.columns[e].customclass&&r.addClass(s.columns[e].customclass),s.columns[e].css&&r.css(s.columns[e].css),s.columns[e].hidden&&r.hide(),r},column:function(a){var e=t("<th></th>"),o=this.options,r="dt-column_"+a+Math.floor(1e3*Math.random()+1);return o.columns[a].classname=r,e.data("column_properties",o.columns[a]).addClass(r).text(o.columns[a].title),o.columns[a].customheaderclass&&e.addClass(o.columns[a].customheaderclass),o.columns[a].css&&e.css(o.columns[a].css),o.columns[a].hidden&&e.hide(),e},sort:function(a){var e=t(this).data("column_properties"),o=a.data,r=a.data.options,s=!1;if(e.sortOrder=e.sortOrder?"asc"==e.sortOrder?"desc":"":"asc",r.allowMultipleSort){for(var l=0;l<r.sort.length;l++)r.sort[l][0]==e.field&&(r.sort[l][1]=e.sortOrder,""===e.sortOrder&&r.sort.splice(l,1),s=!0);s||r.sort.push([e.field,e.sortOrder])}else r.sort=[],e.sortOrder&&r.sort.push([e.field,e.sortOrder]);localStorage&&(localStorage[o.localStorageId+".sort"]=JSON.stringify(r.sort)),r.currentPage=1,o.render()},pagination:function(){var a=(this.$element,this),e=this.options,o=this.resultset;if(!(e.perPage>=o.totalRows)){if(!this.$pagination){this.$pagination=t("<div></div>").addClass("pull-right"),e.pageCount=Math.ceil(o.totalRows/e.perPage),localStorage&&(localStorage[a.localStorageId+".time"]=new Date);var r,s,l=t("<ul></ul>").addClass("pagination pagination-sm"),i=t("<li></li>").append(t("<a></a>").attr("href","#").data("page",1).html("&laquo;").click(function(){return e.currentPage=1,localStorage&&(localStorage[a.localStorageId+".page"]=e.currentPage),a.render(),!1})),n=t("<li></li>").append(t("<a></a>").attr("href","#").data("page",e.currentPage-1).html("&lt;").click(function(){return e.currentPage-=1,e.currentPage=e.currentPage>=1?e.currentPage:1,localStorage&&(localStorage[a.localStorageId+".page"]=e.currentPage),a.render(),!1})),d=t("<li></li>").append(t("<a></a>").attr("href","#").data("page",e.currentPage+1).html("&gt;").click(function(){return e.currentPage+=1,e.currentPage=e.currentPage<=e.pageCount?e.currentPage:e.pageCount,localStorage&&(localStorage[a.localStorageId+".page"]=e.currentPage),a.render(),!1})),c=t("<li></li>").append(t("<a></a>").attr("href","#").data("page",e.pageCount).html("&raquo;").click(function(){return e.currentPage=e.pageCount,localStorage&&(localStorage[a.localStorageId+".page"]=e.currentPage),a.render(),!1})),p=2*e.pagePadding;p>=e.pageCount?(r=1,s=e.pageCount):(r=e.currentPage-e.pagePadding,r<=0&&(r=1),s=r+p,s>e.pageCount&&(s=e.pageCount,r=s-p));for(var u=r;u<=s;u++){var h=t("<li></li>").append(t("<a></a>").attr("href","#").data("page",u).text(u).click(function(){return e.currentPage=t(this).data("page"),localStorage&&(localStorage[a.localStorageId+".page"]=e.currentPage),a.render(),!1}));u==e.currentPage&&h.addClass("active"),l.append(h)}1==e.currentPage&&(i.addClass("disabled"),n.addClass("disabled")),e.currentPage==e.pageCount&&(d.addClass("disabled"),c.addClass("disabled")),l.prepend(i,n),l.append(d,c),this.$pagination.append(l)}return this.$pagination}},remove:function(){var t=this.$element;this.$section_header&&this.$section_header.remove(),t.data("datatable",null),t.empty()}},t.fn.datatable=function(a){return t.fn.datatable.init.call(this,a,o,"datatable"),this},t.fn.datatable.init=function(a,e,o){function r(r){var s=t.data(r,o);return s||(s=new e(r,t.fn.datatable.elementOptions(r,a)),t.data(r,o,s)),s}var s;return a===!0?this.data(o):"string"==typeof a?(s=this.data(o),s&&s[a](),this):(a=t.extend({},t.fn[o].defaults,a),this.each(function(){r(this)}),this)},t.fn.datatable.DataTable=o,t.fn.datatable.elementOptions=function(a,e){return t.metadata?t.extend({},e,t(a).metadata()):e},t.fn.datatable.defaults={debug:!1,id:void 0,title:"",class:"table table-primary table-hover",perPage:12,pagePadding:2,sort:[],filter:{},post:{},buttons:[],sectionHeader:void 0,totalRows:0,rowsName:"rows",currentPage:1,showPagination:!0,showTopPagination:!1,showHeader:!0,showFooter:!1,showFilterRow:!1,filterModal:void 0,allowExport:!1,allowOverflow:!1,allowMultipleSort:!1,allowSaveColumns:!0,toggleColumns:!1,url:"",columns:[],ascending:t("<span></span>").addClass("fa fa-long-arrow-up"),descending:t("<span></span>").addClass("fa fa-long-arrow-down"),rowCallback:void 0,tableCallback:void 0,headerCallback:void 0,footerCallback:void 0,tablePreRender:void 0,autoLoad:!0,tableFade:500}}(window.jQuery);